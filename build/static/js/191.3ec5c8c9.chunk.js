"use strict";(self.webpackChunkmern_practice=self.webpackChunkmern_practice||[]).push([[191],{8474:function(e,n,t){t.d(n,{AW:function(){return o},a$:function(){return s},pH:function(){return c}});var r=t(4165),a=t(5861),i=t(7803),u=t(7757),l=t(1379),o=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.config,e.prev=1,e.next=4,i.Z.get("".concat(l.y.Users),t);case 4:return a=e.sent,e.abrupt("return",(0,u.A)(a));case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",(0,u.A)(null===e.t0||void 0===e.t0?void 0:e.t0.response));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(n){return e.apply(this,arguments)}}(),s=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t,a,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.payload,a=n.config,e.prev=1,e.next=4,i.Z.post("".concat(l.y.Signup),t,a);case 4:return o=e.sent,e.abrupt("return",(0,u.A)(o));case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",(0,u.A)(null===e.t0||void 0===e.t0?void 0:e.t0.response));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(n){return e.apply(this,arguments)}}(),c=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t,a,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.payload,a=n.config,e.prev=1,e.next=4,i.Z.post("".concat(l.y.Login),t,a);case 4:return o=e.sent,e.abrupt("return",(0,u.A)(o));case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",(0,u.A)(null===e.t0||void 0===e.t0?void 0:e.t0.response));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(n){return e.apply(this,arguments)}}()},7212:function(e,n,t){t.d(n,{Z:function(){return l}});var r=t(885),a=t(2791),i=t(3999),u=t(184);var l=function(e){var n=e.id,t=e.center,l=e.onInput,o=e.errorText,s=(0,a.useState)(),c=(0,r.Z)(s,2),d=c[0],p=c[1],v=(0,a.useState)(),f=(0,r.Z)(v,2),m=f[0],h=f[1],y=(0,a.useState)(!1),x=(0,r.Z)(y,2),Z=x[0],g=x[1],b=(0,a.useRef)();return(0,a.useEffect)((function(){if(d){var e=new FileReader;e.onload=function(){h(e.result)},e.readAsDataURL(d)}}),[d]),(0,u.jsxs)("div",{className:"form-control",children:[(0,u.jsx)("input",{id:n,name:"image",ref:b,style:{display:"none"},type:"file",accept:".jpg, .png, .jpeg",onChange:function(e){var t,r=Z;e.target.files&&1===e.target.files.length?(t=e.target.files[0],p(t),g(!0),r=!0):(g(!1),r=!1),l(n,t,r)}}),(0,u.jsxs)("div",{className:"image-upload ".concat(t&&"center"),children:[(0,u.jsx)("div",{className:"image-upload__preview",children:m?(0,u.jsx)("img",{src:m,alt:"Preview"}):(0,u.jsx)("p",{children:"Please pick an image."})}),(0,u.jsx)(i.Z,{type:"button",onClick:function(){b.current.click()},children:"PICK IMAGE"})]}),!Z&&(0,u.jsx)("p",{children:o})]})}},2810:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t(885),a=t(1413),i=t(2791),u=t(291),l=t(184),o=function(e,n){switch(n.type){case"CHANGE":return(0,a.Z)((0,a.Z)({},e),{},{value:n.val,isValid:(0,u.Gu)(n.val,n.validators)});case"TOUCH":return(0,a.Z)((0,a.Z)({},e),{},{isTouched:!0});default:return e}};function s(e){var n=e.label,t=e.id,a=e.element,u=e.type,s=e.placeholder,c=e.rows,d=e.errorText,p=e.validators,v=e.onInput,f=e.initialValue,m=e.initialValidity,h=(0,i.useReducer)(o,{value:f||"",isValid:m||!1,isTouched:!1}),y=(0,r.Z)(h,2),x=y[0],Z=y[1],g=x.value,b=x.isValid;(0,i.useEffect)((function(){v(t,g,b)}),[t,g,b,v]);var w=function(e){Z({type:"CHANGE",val:e.target.value,validators:p})},j=function(){Z({type:"TOUCH"})},I="input"===a?(0,l.jsx)("input",{id:t,type:u,placeholder:s,onChange:w,value:x.value,onBlur:j,autocomplete:"false"}):(0,l.jsx)("textarea",{id:t,rows:c||3,onChange:w,value:x.value,onBlur:j});return(0,l.jsxs)("div",{className:"form-control ".concat(!x.isValid&&x.isTouched&&"form-control--invalid"),children:[(0,l.jsx)("label",{htmlFor:t,children:n}),I,!x.isValid&&x.isTouched&&(0,l.jsx)("p",{children:d})]})}},5094:function(e,n,t){t.d(n,{c:function(){return o}});var r=t(885),a=t(4942),i=t(1413),u=t(2791),l=function(e,n){switch(n.type){case"INPUT_CHANGE":var t=!0;for(var r in e.inputs)e.inputs[r]&&(t=r===n.inputId?t&&n.isValid:t&&e.inputs[r].isValid);return(0,i.Z)((0,i.Z)({},e),{},{inputs:(0,i.Z)((0,i.Z)({},e.inputs),{},(0,a.Z)({},n.inputId,{value:n.value,isValid:n.isValid})),isValid:t});case"SET_DATA":return{inputs:n.inputs,validity:n.formIsValid};default:return e}},o=function(e,n){var t=(0,u.useReducer)(l,{inputs:e,isValid:n}),a=(0,r.Z)(t,2),i=a[0],o=a[1];return[i,(0,u.useCallback)((function(e,n,t){o({type:"INPUT_CHANGE",value:n,isValid:t,inputId:e})}),[]),(0,u.useCallback)((function(e,n){o({type:"SET_DATA",inputs:e,formIsValid:n})}),[])]}},291:function(e,n,t){t.d(n,{Ox:function(){return c},CP:function(){return s},hg:function(){return o},Gu:function(){return d}});var r=t(8192);var a="REQUIRE",i="MINLENGTH",u="MAXLENGTH",l="EMAIL",o=function(){return{type:a}},s=function(e){return{type:i,val:e}},c=function(){return{type:l}},d=function(e,n){var t,o=!0,s=function(e,n){var t="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=(0,r.Z)(e))||n&&e&&"number"===typeof e.length){t&&(e=t);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,l=!0,o=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return l=e.done,e},e:function(e){o=!0,u=e},f:function(){try{l||null==t.return||t.return()}finally{if(o)throw u}}}}(n);try{for(s.s();!(t=s.n()).done;){var c=t.value;c.type===a&&(o=o&&e.trim().length>0),c.type===i&&(o=o&&e.trim().length>=c.val),c.type===u&&(o=o&&e.trim().length<=c.val),"MIN"===c.type&&(o=o&&+e>=c.val),"MAX"===c.type&&(o=o&&+e<=c.val),c.type===l&&(o=o&&/^\S+@\S+\.\S+$/.test(e))}}catch(d){s.e(d)}finally{s.f()}return o}},4191:function(e,n,t){t.r(n),t.d(n,{default:function(){return g}});var r=t(4165),a=t(5861),i=t(1413),u=t(885),l=t(2791),o=t(2810),s=t(3373),c=t(291),d=t(5094),p=t(3999),v=t(3108),f=t(8474),m=t(9895),h=t(5434),y=t(9508),x=t(7212),Z=t(184);var g=function(){var e=(0,l.useState)(!0),n=(0,u.Z)(e,2),t=n[0],g=n[1],b=(0,l.useContext)(v.V).login,w=(0,d.c)({email:{value:"",isValid:!1},password:{value:"",isValid:!1}},!1),j=(0,u.Z)(w,3),I=j[0],V=j[1],T=j[2],A=(0,y.i)(),C=A.isLoading,N=A.error,k=A.clearError,E=A.sendRequest,S=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var a,i,u,l,o,s,c,d,p,v,m,h,y,x,Z,g;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),a=I.inputs,i=a.email,u=a.name,l=a.password,o=a.image,t){e.next=21;break}return e.prev=3,(c=new FormData).append("email",null===i||void 0===i?void 0:i.value),c.append("name",null===u||void 0===u?void 0:u.value),c.append("password",null===l||void 0===l?void 0:l.value),c.append("image",null===o||void 0===o?void 0:o.value),e.next=11,E({fn:f.a$,payload:c});case 11:return d=e.sent,p=null===d||void 0===d||null===(s=d.data)||void 0===s?void 0:s.user,v=p.id,m=p.token,b(v,m),e.abrupt("return");case 17:return e.prev=17,e.t0=e.catch(3),console.log(e.t0),e.abrupt("return");case 21:return e.prev=21,e.next=24,E({fn:f.pH,payload:{email:null===i||void 0===i?void 0:i.value,password:null===l||void 0===l?void 0:l.value}});case 24:y=e.sent,x=null===y||void 0===y||null===(h=y.data)||void 0===h?void 0:h.user,Z=x.id,g=x.token,b(Z,g),e.next=32;break;case 29:e.prev=29,e.t1=e.catch(21),console.log(e.t1);case 32:case"end":return e.stop()}}),e,null,[[3,17],[21,29]])})));return function(n){return e.apply(this,arguments)}}();return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(h.Z,{error:N,onClear:k}),(0,Z.jsxs)(s.Z,{className:"authentication",children:[C&&(0,Z.jsx)(m.Z,{asOverlay:!0}),(0,Z.jsx)("h2",{children:"Login Required"}),(0,Z.jsx)("hr",{}),(0,Z.jsxs)("form",{onSubmit:S,enctype:"multipart/form-data",children:[!t&&(0,Z.jsx)(o.Z,{element:"input",id:"name",type:"text",label:"Your Name",validators:[(0,c.hg)()],errorText:"Please enter a name.",onInput:V}),!t&&(0,Z.jsx)(x.Z,{center:!0,id:"image",onInput:V,errorText:"Please provide an image."}),(0,Z.jsx)(o.Z,{element:"input",id:"email",type:"text",label:"E-mail",validators:[(0,c.Ox)()],errorText:"Please enter a valid email.",onInput:V}),(0,Z.jsx)(o.Z,{element:"input",id:"password",type:"password",label:"Password",validators:[(0,c.CP)(6)],errorText:"Please enter a valid password(at least 6 characters)",onInput:V}),(0,Z.jsx)(p.Z,{type:"submit",disabled:!I.isValid,children:t?"LOGIN":"SIGNUP"})]}),(0,Z.jsxs)(p.Z,{inverse:!0,onClick:function(){t?T((0,i.Z)((0,i.Z)({},I.inputs),{},{name:{value:"",isValid:!1},image:{value:null,isValid:!1}}),!1):T((0,i.Z)((0,i.Z)({},I.inputs),{},{name:void 0,image:void 0}),I.inputs.email.isValid&&I.inputs.password.isValid),g((function(e){return!e}))},children:["SWITCH TO ",t?"SIGNUP":"LOGIN"]})]})]})}}}]);
//# sourceMappingURL=191.3ec5c8c9.chunk.js.map